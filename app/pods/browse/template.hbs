<div class="cover cover--header">
<div class="wrapper">

  {{#link-to "new" class="button button--bordered pull-right"}}
    <i class="fa fa-plus"></i>
    New request
  {{/link-to}}
  <h1 class="cover-title">My requests</h1>

</div>
</div>

<div class="wrapper">

  <div class="section">

    {{#filter-nav
      type=type
      author=author
      assignee=assignee
      sort=sort
      updateFilter=(action 'updateFilter')
      resetFilters=(action 'resetFilters')
      filterMeta=model.meta.filters}}
      <div class="innerNav">
        {{#link-to 'browse' (query-params status="open" page=1) class=(if (eq status "open") "active") data-test-status-tab="open"}}
          <i class="fa fa-exclamation-circle" /> {{model.meta.totalOpen}}
          Open
        {{/link-to}}
        {{#link-to 'browse' (query-params status="closed" page=1) class=(if (eq status "closed") "active") data-test-status-tab="closed"}}
          <i class="fa fa-check" />
          {{model.meta.totalClosed}}
          Closed
        {{/link-to}}
      </div>
    {{/filter-nav}}

    <div class="ticketList">
    {{#each model as |data|}}
      {{#link-to "view" data.id class=(concat "ticket ticket--" data.type) data-test-ticket=data.id}}
        <div class="ticket-cell ticket-icon">
          {{ticket-icon data.type}}
        </div>
        <div class="ticket-cell ticket-name">
          <h4 data-test-ticket-name>{{data.displayName}}</h4>
        </div>
        <div class="ticket-cell ticket-date text-right">
          <p><time datetime={{data.created}} title={{moment-format data.created 'LLL'}}>{{moment-format data.created 'll'}}</time></p>
        </div>
      {{/link-to}}
    {{/each}}
    </div>

    {{ui-pagination meta=model.meta route='browse'}}

  </div>

</div>

