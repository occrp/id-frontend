<div class="activityHeader">
  <h2 class="t3 t-light">
    {{t 'activity' count=1}}

    {{#if loadItems.isRunning}}
      {{ui-spinner}}
    {{/if}}
  </h2>

  {{activity-pagination
    meta=activityCache.meta
    current=currentPage
    onSwitch=(action 'switchPage')}}
</div>

{{#if loadItems.last.error}}
  <div class="alert alert--danger t-sm mt-4 mb-8" data-test-activity-error>
    {{icon "alert"}}
    {{t 'errors.activities'}}
  </div>
{{else}}
  <div class="activityList">
    {{#each activityCache as |item|}}
      {{#with (get componentsByType item.verb) as |type|}}
        {{component (concat 'activity-' type)
          data=item
          class=(concat "activity activity--" type)
          data-test-activity=type}}
      {{/with}}
    {{/each}}

    {{yield}}
  </div>
{{/if}}
